{"version":3,"file":"commonHelpers.js","sources":["../src/js/andrii.js","../src/js/checkout.js"],"sourcesContent":["import imgUrl from '../images/icons.svg';\n\nconst cartList = document.querySelector('.scrol-list');\nconst nameBAScet = 'BASKET';\n\nconst emptYellowCart = document.querySelector('.empty-yellow-cart');\nconst scrollbarContainer = document.querySelector('.scrollbar-container');\nconst orderContainer = document.querySelector('.order-container');\n\n//-------------------------------------------------------RENDER CART LIST------------------------------------------------------\nconst cartTitleNumber = document.querySelector('.quantity-in-cart');\nconst cartTitleNumberHead = document.querySelector('.quantity-in-cart-header');\nconst totalAmount = document.querySelector('.cart-sum-span');\n\nlet parsedCart = JSON.parse(localStorage.getItem(`${nameBAScet}`));\n// console.log(parsedCart);\n\nfunction culTotalSum() {\n  const totalScore = parsedCart.reduce((total, item) => {\n    return total + item.price * item.amount;\n  }, 0);\n  const formattedTotal = totalScore.toFixed(2);\n  totalAmount.textContent = `$${formattedTotal}`;\n}\n\nfunction renderMainCards(datas) {\n  if (!datas || datas.length === 0) {\n    emptYellowCart.style.display = 'block';\n    scrollbarContainer.style.display = 'none';\n    orderContainer.style.display = 'none';\n    return;\n  }\n  culTotalSum();\n  const murcap = datas\n    .map(\n      item =>\n        `<li class=\"scroll-item\" id=\"${item._id}\">\n              <button class=\"scroll-top-button\" type=\"button\" aria-label=\"1\" id=\"${item._id}\">\n                <svg class=\"scroll-top-icon\" width=\"18\" height=\"18\">\n                  <use href=\"${imgUrl}#icon-close\"></use>\n                </svg>\n              </button>\n              <div class=\"image-container\">\n                <img class=\"scroll-image\" src=\"${item.img}\" alt=\"${item.name}\" width=\"64\" height=\"64\" />\n              </div>\n              <div class=\"text-container\">\n                <h3 class=\"scroll-item-name\">${item.name}</h3>\n                <div class=\"item-charact\">\n                  <p class=\"scroll-item-category\">\n                    Category:<span class=\"span-scroll-category\">${item.category}</span>\n                  </p>\n                  <p class=\"scroll-item-size\">\n                    Size:<span class=\"span-scroll-size\">${item.size}</span>\n                  </p>\n                </div>\n                \n                <div class=\"price-amount\">\n                    <p class=\"scroll-item-price\" id=\"${item._id}price\">$${item.price}</p>\n                    <div class=\"amount-item\">\n                      <button type=\"button\" class=\"button-item-minus\" id=\"${item._id}\">\n                        <svg class=\"minus-icon\">\n                          <use href=\"${imgUrl}#icon-minus\"></use>\n                        </svg>\n                      </button>\n                      <span class=\"amount-number\" id=\"${item._id}amount\">${item.amount}</span>\n                      <button type=\"button\" class=\"button-item-plus\" id=\"${item._id}\">\n                        <svg class=\"plus-icon\">\n                          <use href=\"${imgUrl}#icon-plus\"></use>\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n              </div>\n            </li>`\n    )\n    .join('');\n  cartList.innerHTML = murcap;\n  cartTitleNumber.textContent = datas.length;\n  cartTitleNumberHead.textContent = datas.length;\n}\n\nrenderMainCards(parsedCart);\n\n//----------------------------------------------------- FUNCTION CLEAR ALL----------------------------------------------------\n\nconst btnClearCartAll = document.querySelector('.cart-button');\nbtnClearCartAll.addEventListener('click', onclickClearOll);\nfunction onclickClearOll(event) {\n  emptYellowCart.style.display = 'block';\n  scrollbarContainer.style.display = 'none';\n  orderContainer.style.display = 'none';\n  cartTitleNumber.textContent = 0;\n  cartTitleNumberHead.textContent = 0;\n  localStorage.removeItem('BASKET');\n  cartList.innerHTML = '';\n}\n\n//---------------------------------------------------FUNCTION CLEAR ONE------------------------------------------------\n\ncartList.addEventListener('click', onclickClearOne);\n\nfunction onclickClearOne(event) {\n  if (!event.target.classList.contains('scroll-top-button')) {\n    return;\n  }\n\n  const idButton = event.target.id;\n  const indexToRemove = parsedCart.findIndex(item => item._id === idButton);\n  if (indexToRemove !== -1) {\n    parsedCart.splice(indexToRemove, 1);\n    console.log(parsedCart);\n    renderMainCards(parsedCart);\n    localStorage.setItem(`${nameBAScet}`, JSON.stringify(parsedCart));\n  }\n  if (!parsedCart.length) {\n    cartTitleNumber.textContent = parsedCart.length;\n    cartTitleNumberHead.textContent = parsedCart.length;\n    emptYellowCart.style.display = 'block';\n    scrollbarContainer.style.display = 'none';\n    orderContainer.style.display = 'none';\n  }\n}\n\n//----------------------------------------------------AMOUNT------------------------------------------\n\n// const buttonPusAmount = document.querySelector('button-item-plus');\n// const buttonMinusAmount = document.querySelector('button-item-minus');\nconst numberAmount = document.querySelector('.amount-number');\n\n//-----------------------------------------------AMOUNT PLUS--------------------------\n\ncartList.addEventListener('click', plusAmount);\nfunction plusAmount(event) {\n  if (!event.target.classList.contains('button-item-plus')) {\n    return;\n  }\n\n  const buttonId = event.target.id;\n  const indexObject = parsedCart.findIndex(item => item._id === buttonId);\n  let number = Number(parsedCart[indexObject].amount);\n\n  function plusNumber() {\n    number++;\n    parsedCart[indexObject].amount = number;\n    culTotalSum();\n  }\n  plusNumber();\n  localStorage.setItem(`${nameBAScet}`, JSON.stringify(parsedCart));\n  document.getElementById(`${buttonId}amount`).textContent = number;\n}\n\n// ------------------------------------------------AMOUNT MINUS --------------------------------------\n\ncartList.addEventListener('click', minusAmount);\nfunction minusAmount(event) {\n  const buttonId = event.target.id;\n  const indexObject = parsedCart.findIndex(item => item._id === buttonId);\n\n  if (!event.target.classList.contains('button-item-minus')) {\n    return;\n  }\n  let number = Number(parsedCart[indexObject].amount);\n  if (number === 1) {\n    return;\n  }\n  function minusNumber() {\n    number--;\n    parsedCart[indexObject].amount = number;\n    culTotalSum();\n  }\n  minusNumber();\n  localStorage.setItem(`${nameBAScet}`, JSON.stringify(parsedCart));\n  document.getElementById(`${buttonId}amount`).textContent = number;\n}\n\nexport { onclickClearOll };\n","import axios from 'axios';\nimport { onclickClearOll } from './andrii.js';\nimport Swal from 'sweetalert2'\nconst nameBasket = 'BASKET';\n\n// get element\nfunction getCartItems() {\n  return JSON.parse(localStorage.getItem(`${nameBasket}`)) || [];\n}\n// make order\nasync function handleCheckout() {\n  try {\n    const userEmailElement = document.querySelector('#user-email');\n\n    if (!userEmailElement || !userEmailElement.value) {\n      Swal.fire({\n  title: 'Write your Email!',\n        icon: 'warning',\n        iconColor: `#6D8434`,\n        showConfirmButton: false,\n        timer: 2000,\n  \n})\n      return;\n    }\n\n    const userEmail = userEmailElement.value;\n    const cartItems = getCartItems();\n\n    const orderData = {\n      email: userEmail,\n      products: cartItems.map(item => ({\n        productId: item._id,\n        amount: item.amount,\n      })),\n    };\n\n    const response = await axios.post('https://food-boutique.b.goit.study/api/orders', orderData);\n\n    if (response.status === 201) {\n      localStorage.removeItem(`${nameBasket}`);\n\n      const modal = document.querySelector('.backdrop');\n      modal.style.display = 'block';\n\n      const closeModalBtn = document.querySelector('.close_button');\n      if (closeModalBtn) {\n        closeModalBtn.addEventListener('click', handleCloseModal);\n      }\n    } else {\n      console.error('Unsuccessful order creation. Response:', response);\n      Swal.fire({\n  title: 'Error creating order. Please try again.',\n        icon: 'warning',\n        iconColor: `#6D8434`,\n        showConfirmButton: false,\n        timer: 2000,\n})\n    }\n  } catch (error) {\n    console.error('Error creating order:', error);\n    alert(error.response.data.message || Swal.fire({\n  title: 'Error creating order. Please try again.',\n        icon: 'warning',\n        iconColor: `#6D8434`,\n        showConfirmButton: false,\n        timer: 2000,\n}));\n  }\n}\n// update cart\n\n// close modal\nfunction handleCloseModal() {\n  const modal = document.querySelector('.backdrop');\n  modal.style.display = 'none';\n  onclickClearOll();\n  clearCartHTML();\n  showEmptyCart();\n}\n// clear cart\nfunction clearCartHTML() {\n  const cartList = document.querySelector('.scrollbar');\n  cartList.innerHTML = '';\n}\n\nfunction showEmptyCart() {\n  const emptyCartElement = document.querySelector('.empty-yellow-cart');\n  if (emptyCartElement) {\n    emptyCartElement.style.display = 'block';\n  }\n}\n\ndocument.getElementById('checkoutBtn').addEventListener('click', handleCheckout);\n"],"names":["cartList","nameBAScet","emptYellowCart","scrollbarContainer","orderContainer","cartTitleNumber","cartTitleNumberHead","totalAmount","parsedCart","culTotalSum","formattedTotal","total","item","renderMainCards","datas","murcap","imgUrl","btnClearCartAll","onclickClearOll","event","onclickClearOne","idButton","indexToRemove","plusAmount","buttonId","indexObject","number","plusNumber","minusAmount","minusNumber","nameBasket","getCartItems","handleCheckout","userEmailElement","Swal","userEmail","cartItems","orderData","response","axios","modal","closeModalBtn","handleCloseModal","error","clearCartHTML","showEmptyCart","emptyCartElement"],"mappings":"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"}